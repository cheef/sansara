(function(){window.Sansara=function(){function a(b,c){this.api=new a.Api($(b),this.mergeParams(c)),this.enableWidget(),this.enablePlugins(),this.api.trigger("initialize"),this.isAutorun()&&this.api.trigger("draw")}a.prototype.enableWidget=function(){this.api.widget=$.sansara.widgets[this.api.params.widget];return this.api.widget.enable(this.api)},a.prototype.enablePlugins=function(){var a,b,c,d,e,f;e=this.selectedPluginNames(),f=[];for(c=0,d=e.length;c<d;c++)b=e[c],a=$.sansara.plugins[b],f.push(a?this.enablePlugin(a):window.console!=null?window.console.error("Plugin '"+b+"' not found"):void 0);return f},a.prototype.enablePlugin=function(a){try{a.enable(this.api);return this.api.plugins[a.name]=a}catch(b){if(window.console!=null)return window.console.error("Plugin '"+pluginName+"' not enabled, because of error: "+b)}},a.prototype.selectedPluginNames=function(){var a;a=$.merge([],this.api.widget.plugins||[]);return a=$.merge(a,this.api.params.plugins||[])},a.prototype.mergeParams=function(a){return $.extend({},this.defaults,a||{})},a.prototype.isAutorun=function(){return this.api.params.autorun===!0},a.prototype.defaults={autorun:!0,widget:"horizontal",debug:!1};return a}()}).call(this),function(){Sansara.Utils={arrayFromArguments:function(a){return typeof a=="undefined"?[]:Array.prototype.slice.call(a)},parseMixedArguments:function(a){var b,c,d;a=Sansara.Utils.arrayFromArguments(a),d=a.shift(),typeof d=="string"?(b={},b[d]=a.shift()):b=d,c=a.shift();if(typeof b!="object")throw"First param should be a string or hash, but received "+typeof b;return[b,c]}}}.call(this),function(){Sansara.Plugin=function(){function a(a,b){this.name=a,b!=null&&$.extend(this,b)}a.prototype.enable=function(a){this.api=a,this.events!=null&&this.api.subscribe(this.events,this.api);if(this.methods!=null)return $.extend(this.api,this.methods)};return a}()}.call(this),function(){Sansara.Widget=function(){function a(a,b){this.name=a,b!=null&&$.extend(this,b)}a.prototype.enable=function(a){this.api=a;if(this.events!=null)return a.subscribe(this.events,this)},a.prototype.plugins=[];return a}()}.call(this),function(){$.sansara=function(a,b){return $(a).each(function(){var a;a=new Sansara(this,b);return $(this).data("sansara",a.api)})},$.sansara.widgets={},$.sansara.widget=function(a,b){if($.type(a)==="string")return $.sansara.widgets[a]=new Sansara.Widget(a,b);if(window.console!=null)return window.console.error("Wrong name for widget",a)},$.sansara.plugins={},$.sansara.plugin=function(a,b){if($.type(a)==="string")return $.sansara.plugins[a]=new Sansara.Plugin(a,b);if(window.console!=null)return window.console.error("Wrong name for plugin",a)},$.fn.sansara=function(a){return $.sansara(this,a)}}.call(this),function(){Sansara.Api=function(){function a(a,b){this.element=a,this.params=b}a.prototype.plugins={},a.prototype.debug=function(a,b,c){window.console!=null&&this.params.debug&&window.console.log(a,b);return c.call(this)},a.prototype.trigger=function(){var a,b;b=Sansara.Utils.arrayFromArguments(arguments),a=b.shift();if(a==null)throw"Trigger method should be called with event name";b.unshift(this);return this.debug("Triggering the '"+a+"' event with",b,function(){return $(this.element).triggerHandler(a,b)})},a.prototype.subscribe=function(){var a,b,c,d;d=Sansara.Utils.parseMixedArguments(arguments),a=d[0],b=d[1],c=this.element;return $.each(a,function(a,d){return $(c).bind(a,$.proxy(d,b))})};return a}()}.call(this),function(){$.sansara.widget("blank",{})}.call(this),function(){Sansara.Widget.Horizontal={},$.sansara.widget("horizontal",{plugins:["theme-roller","moveable","states"],events:{"initialize.items":function(a,b){return b.items=b.element.find("li")},"initialize.viewport":function(a,b){return this.viewport=new Sansara.Widget.Horizontal.Viewport(this)},"draw.viewport":function(a,b){return this.viewport.draw()},"initialize.wrapper":function(a,b){return this.wrapper=new Sansara.Widget.Horizontal.Wrapper(this)},"draw.wrapper":function(a,b){return this.wrapper.draw()},"draw.container":function(a,b){return b.element.addClass("b-sansara-items")},"initialize.controls":function(a,b){this.controlPrevious=new Sansara.Widget.Horizontal.Control(this),this.controlPrevious.template.addClass("b-sansara-control-previous"),this.controlNext=new Sansara.Widget.Horizontal.Control(this);return this.controlNext.template.addClass("b-sansara-control-next")},"draw.controls":function(a,b){this.wrapper.element.prepend(this.controlPrevious.template),this.controlPrevious.element=this.wrapper.element.find(".b-sansara-control-previous"),this.controlPrevious.element.click(function(){return b.previous()}),this.wrapper.element.append(this.controlNext.template),this.controlNext.element=this.wrapper.element.find(".b-sansara-control-next");return this.controlNext.element.click(function(){return b.next()})},"draw.width":function(a,b,c){c==null&&(c={}),b.element.find("li img:first").load(function(){var a;a=$(this).width();if(a!==b.width)return b.trigger("draw.width",{width:a})}),b.width=c.width||b.params.width||b.items.width(),this.width=b.width*b.items.length,b.element.css({width:this.width});return $([b.items,this.viewport.element,this.viewport.layout]).each(function(){return this.css({width:b.width})})},"draw.height":function(a,b,c){c==null&&(c={}),b.element.find("li img:first").load(function(){var a;a=$(this).height();if(a!==b.height)return b.trigger("draw.height",{height:a})}),b.height=c.height||b.params.height||b.items.height();return $([b.items,this.viewport.element,this.viewport.layout]).each(function(){return this.css({height:b.height})})},"move.controls":function(a,b){return this.undisableControls()},"scroll.controls":function(a,b){return this.undisableControls()},"tail.controls":function(a,b){return this.disableControl(this.controlNext)},"head.controls":function(a,b){return this.disableControl(this.controlPrevious)}},disabledControlDomClass:"b-sansara-control-disabled",disableControl:function(a){a.element.prop("disabled",!0);return a.element.addClass(this.disabledControlDomClass)},undisableControls:function(){var a,b,c,d,e;d=[this.controlNext.element,this.controlPrevious.element],e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.prop("disabled",!1),e.push(a.removeClass(this.disabledControlDomClass));return e}})}.call(this),function(){Sansara.Widget.Horizontal.Viewport=function(){function a(a){this.widget=a,this.template=$("<div>").addClass("b-sansara-viewport"),this.template=$("<div>").addClass("l-sansara-viewport").html(this.template)}a.prototype.draw=function(){$(this.widget.api.element).wrap(this.template),this.element=$(this.widget.api.element).parent(".b-sansara-viewport");return this.layout=$(this.element).parent(".l-sansara-viewport")},a.prototype.width=function(){return this.widget.api.params.width},a.prototype.height=function(){return this.widget.api.params.height};return a}()}.call(this),function(){Sansara.Widget.Horizontal.Wrapper=function(){function a(a){this.widget=a,this.template=$("<div>").addClass("b-sansara"),this.template=$("<div>").addClass("l-sansara").html(this.template)}a.prototype.draw=function(){$(this.widget.viewport.layout).wrap(this.template),this.element=$(this.widget.viewport.layout).parent(".b-sansara");return this.layout=$(this.element).parent(".l-sansara")};return a}()}.call(this),function(){Sansara.Widget.Horizontal.Control=function(){function a(a){this.widget=a,this.template=$("<input>").addClass("b-sansara-control").attr({type:"button"})}return a}()}.call(this),function(){$.sansara.plugin("theme-roller",{events:{"initialize.theme-roller":function(a,b){return this.theme=this.params.theme},"draw.theme-roller":function(a,b){return this.widget.wrapper.layout.addClass(this.plugins["theme-roller"].getThemeDomClass(this.theme))},"change_theme.theme-roller":function(a,b,c){c==null&&(c={}),this.widget.wrapper.layout.removeClass(this.plugins["theme-roller"].getThemeDomClass(this.theme)),this.theme=c.name;return this.trigger("draw.theme-roller")}},methods:{changeTheme:function(a){return this.trigger("change_theme.theme-roller",{name:a})}},getThemeDomClass:function(a){return["l-sansara",a,"theme"].join("-")}})}.call(this),function(){$.sansara.plugin("moveable",{events:{"initialize.moveable":function(a,b){return this.currentItemPosition=0},"draw.moveable":function(a,b){return b.move({position:1})},"scroll.moveable":function(a,b,c){this.plugins.moveable.parseMoveParams.call(b,c);return this.element.animate({left:-b.width*(this.currentItemPosition-1)})},"move.moveable":function(a,b,c){this.plugins.moveable.parseMoveParams.call(b,c);return this.element.css({left:-b.width*(this.currentItemPosition-1)})},"next.moveable":function(a,b){return b.trigger("scroll",{position:this.currentItemPosition+1})},"previous.moveable":function(a,b){return b.trigger("scroll",{position:this.currentItemPosition-1})}},parseMoveParams:function(a){a.to!=null&&(this.currentItem=a.to,this.currentItemPosition=this.items.indexOf(this.currentItem)+1);if(a.position!=null){this.currentItemPosition=a.position;return this.currentItem=this.items[this.currentItemPosition-1]}},methods:{next:function(){return this.trigger("next")},move:function(a){return this.trigger("move",a)},scroll:function(a){return this.trigger("scroll",a)},previous:function(){return this.trigger("previous")}}})}.call(this),function(){$.sansara.plugin("states",{events:{"move.states":function(a,b){return this.plugins.states.detectState.call(b)},"scroll.states":function(a,b){return this.plugins.states.detectState.call(b)}},detectState:function(){switch(!1){case this.items.length!==this.currentItemPosition:return this.trigger("tail");case this.currentItemPosition!==1:return this.trigger("head")}}})}.call(this)